From 260a5e1a755476fbe52396495ab654a1f6f9e264 Mon Sep 17 00:00:00 2001
From: "kernelci.org bot" <bot@kernelci.org>
Date: Fri, 11 Jun 2021 19:27:14 +0100
Subject: [PATCH 6/6] FIXUP chromeos-configs

---
 config/core/build-configs.yaml | 55 +++++++++++++++++++---------------
 1 file changed, 31 insertions(+), 24 deletions(-)

diff --git a/config/core/build-configs.yaml b/config/core/build-configs.yaml
index b56603366ce9..47f8471fbac4 100644
--- a/config/core/build-configs.yaml
+++ b/config/core/build-configs.yaml
@@ -455,6 +455,33 @@ android_variants: &android_variants
       riscv: *riscv_arch
 
 
+
+chromeos_variants:
+  clang-13: &chromeos-configs
+        build_environment: clang-13
+        architectures:
+            arm:
+              base_defconfig: 'cros://chromeos-5.10/armel/chromiumos-arm.flavour.config'
+              extra_configs:
+                - 'cros://chromeos-5.10/armel/chromiumos-rockchip.flavour.config'
+              filters: &cros-filters
+                - regex: { defconfig: 'cros' }
+            arm64:
+              base_defconfig: 'cros://chromeos-5.10/arm64/chromiumos-arm64.flavour.config'
+              extra_configs:
+                - 'cros://chromeos-5.10/arm64/chromiumos-mediatek.flavour.config'
+                - 'cros://chromeos-5.10/arm64/chromiumos-qualcomm.flavour.config'
+                - 'cros://chromeos-5.10/arm64/chromiumos-rockchip64.flavour.config'
+              filters: *cros-filters
+            x86_64:
+              base_defconfig: 'cros://chromeos-5.10/x86_64/chromiumos-x86_64.flavour.config'
+              extra_configs:
+                - 'cros://chromeos-5.10/x86_64/chromeos-amd-stoneyridge.flavour.config'
+                - 'cros://chromeos-5.10/x86_64/chromeos-intel-denverton.flavour.config'
+                - 'cros://chromeos-5.10/x86_64/chromeos-intel-pineview.flavour.config'
+              filters: *cros-filters
+
+
 build_configs:
 
   agross:
@@ -807,8 +834,8 @@ build_configs:
             <<: *x86_64_defconfig
             fragments: [x86-chromebook]
             extra_configs: ['x86_64_defconfig+x86-chromebook+kselftest']
-      chromeos_configs:
-        <<: *chromeos_configs
+      chromeos-configs:
+        <<: *chromeos-configs
 
   kernelci_chromeos-next:
     tree: kernelci
@@ -862,26 +889,6 @@ build_configs:
       clang-10:
         build_environment: clang-10
         architectures: *arch_clang_configs
-      chromeos-configs: &chromeos_configs
-        build_environment: clang-13
-        architectures:
-            arm:
-              base_defconfig: 'cros://chromeos-5.10/armel/chromiumos-arm.flavour.config'
-              extra_configs:
-                - 'cros://chromeos-5.10/armel/chromiumos-rockchip.flavour.config'
-            arm64:
-              base_defconfig: 'cros://chromeos-5.10/arm64/chromiumos-arm64.flavour.config'
-              extra_configs:
-                - 'cros://chromeos-5.10/arm64/chromiumos-mediatek.flavour.config'
-                - 'cros://chromeos-5.10/arm64/chromiumos-qualcomm.flavour.config'
-                - 'cros://chromeos-5.10/arm64/chromiumos-rockchip64.flavour.config'
-            x86_64:
-              base_defconfig: 'cros://chromeos-5.10/x86_64/chromiumos-x86_64.flavour.config'
-              extra_configs:
-                - 'cros://chromeos-5.10/x86_64/chromeos-amd-stoneyridge.flavour.config'
-                - 'cros://chromeos-5.10/x86_64/chromeos-intel-denverton.flavour.config'
-                - 'cros://chromeos-5.10/x86_64/chromeos-intel-pineview.flavour.config'
-
 
   media:
     tree: media
@@ -949,8 +956,8 @@ build_configs:
                   defconfig: *riscv_clang_configs
 
       # ChromeOS configs
-      chromeos_configs:
-        <<: *chromeos_configs
+      chromeos-configs:
+        <<: *chromeos-configs
 
   next_pending-fixes:
     tree: next
-- 
2.20.1

